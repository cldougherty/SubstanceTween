SubstanceTween v2.2
11/29/2016
Chris Dougherty
chris.ll.dougherty@gmail.com
chris.dougherty@students.aie.edu.au
https://www.linkedin.com/in/archarchaic

What does this tool do?
This tool takes exposed parameters from substance designer files(SBAR) and allows you to create up to two keyframes  by manipulating the exposed Variables and animating them.
You can Write  variables to XML files and read from them as well.
When you are done creating your animated object you can save the object as a Prefab for future use.

Notes:
This tool is meant for simple/optimized materials. if you have a giant  Substance Material that is 2048-2048 or has many exposed parameters near the beginning of the input graph in Substance Designer the tool will lag. There are some materials that I have made and included in this  project that are not meant to be used by this tool(Sand,Rock). I have included them as examples.  
Allegorithmic has a video about optimizing substances for unity: https://www.youtube.com/watch?v=VnhIDRcfAWA
The Rock material has a boolean(true/false) called Surface Mode in the inspector. you will not be able to see the diffrence in some variables depending on which mode it is set to. 
Expect  read XML files to break when using diffrent versions of this tool
Try not to delete objects while in play mode(if you do, exit playmode and restart). 
Try not to use the tool on animated prefabs already created with this tool

Supported exposed parameters
Float
Vector2
Vector3 
Vector4
Color(RGB / RGBA)


Most reliable method without bugs:
Select object in Hierarchy
Press play
Open tool  (Window>SubstanceTween)

Possible future features:

Add object Rotation/Scale instead of only position
Lerp between Position/Rotation/Scale
Ability to cause the emission to flicker.
Sorting XML files when reading them: At the moment if you  change the order of the exposed parameters or add more of them in substance designer and try to import the XML from a previous version of the material it will try and use the previous list.
Adding booleans(True/False): Sometimes in substance designer you will only have a parameter work if another one is turned on or at a specific value. 
Audio: instead of lerping based on time it will also be able to lerp based on audio frequency's. 
Increased performance: at the moment the object will lerp between values even if they don't change. I will also add a option to use RebuildTextures() instead of RebuildTexturesImmediately() which will speed up the framerate but the animation might be slower.
XML preview: when you save a XML file it will possibly save a prefab/preview image(like material icons in your  project view)
Mobile tester: small mobile version where you can edit materials on the go and  send XML files/prefabs to a server
Save material without creating a prefab: at the moment if all you want to do is change a couple variables without animating them or creating a prefab I would use the default sliders in the inspector view and not use this tool. 

Bugs:
If you use this tool on a animated prefab in the asset folder and overwrite the prefab you are working on unity will crash.
If you use this tool on a animated prefab in the asset folder and create a new prefab the animation will glitch.
My material is Pink after I create Prefabs!? - manually reapply your proceduralMaterial  on your object and everything should work again.  
My material is completely black/white or looks wrong - Reset Material (Right click material in inspector view>  reset button). 
Error when creating a second transition before the first - don't do that. (Will be fixed soon)
The tool is blank! - Select a Procedural material and then select the tool window. If that does not work restart unity.
Reading XML files with the sand Material can sometimes have unexpected results.
In rare cases the Reset button on the tool will not work - try selecting a second object, then the first and try again. if that doesnt work restart the tool or exit/enter playmode again.

Changelog:

2.2
Added a button for debug information(lists changes for materials, saves information about written/read Xml files  and created prefabs).
Readded ability to select/work on other objects without bugs.  
Fixed bug where the created prefab would not have any saved values unless you selected it before exiting play mode.
Fixed bug when resetting vectors or trying to set vectors to the minimum/maximum would do nothing.
Fixed bug where  if you select objects with no renderer or procedural material in a specific  order it would crash the tool. 
Fixed bug where if you selected objects, restarted the tool and created a prefab it would make the material pink(Unity material error).
Made it so you cannot open the tool from Window>SubstanceTween if you have nothing selected or if the object does not have the required component(Renderer/ProceduralMaterial) .

2.1
Remade XML read/write(Now using save box instead of manually typing in file path)
Remade transition/reset buttons
Remade Prefab button (Now with save box and you are able to name prefabs)
Readded Sun controls (Not part of tool yet)
Readded _EmissionColor and _MainTex

2.0
Added Position slider
Remade tool using editor scripting instead of using old OnGUI code (Lacks any buttons including XML read/write,  resetting to default or saving object as prefab)
cant edit _EmissionColor or _MainTex
Color picker instead of sliders
Converted all old Arraylists into Lists
1.0 - 1.9
Old version of tool that was written with Unity 4 OnGUI code. 
In these versions you had to  manually type the path for XML files instead of using a save/open box.
Used old Arraylists